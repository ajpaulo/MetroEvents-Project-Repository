
  {% block headerinclude %}

  <title>Dashboard</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">  

{% endblock headerinclude %}

{% block footerinclude %}

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

{% endblock footerinclude %}


{% block content %}

<!-- NAV BAR -->
  <nav class="navbar navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Metro Events</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Request</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Profile</a>
        </li>
      </ul>
    </div>
  </nav>

<br><br>

<div class="container">

<!-- EVENT CARDS -->

  <div class="card">
    <h5 class="card-header">Upcoming Events</h5>
  </div>
  <br>

    <div class="row row-cols-1 row-cols-md-2 g-4">

      {% for event in events %}

      {% now "Y-m-d" as todays_date %}

      {% if  todays_date < event.date %}
      <div class="col">
        <div class="card">
          <div class="card-body">

            <!-- EVENT TITLE -->
            <h5 class="card-title" name="event-name">{{event.title}}</h5>
            
            <!-- EVENT DESCRIPTION-->
            <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>

            <!-- VIEW EVENT BUTTON -->
            <button type="button" class="btn btn-outline-primary" name="event-view-btn" data-toggle="modal" data-target="#newModal-{{event.event_id}}">View Details</button>

            <!-- VIEW EVENT MODAL -->   
            <div class="modal fade" id="newModal-{{event.event_id}}" tabindex="-1" role="dialog" aria-labelledby="newModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">

                  <!--MDDAL HEADER-->
                  <div class="modal-content">
                    <div class="modal-header" style="background-color: #000000">
                      <h4 style="font-family: Helvetica; color: white; padding-bottom: 0px">
                        <b>Event Details</b></h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                  
                  <!-- MODAL BODY-->
                    <div class="modal-body">
                      <div class="jumbotron jumbotron-fluid">
                        <div class="container">
                          <h1 class="display-4">{{event.title}}</h1>
                          <p class="lead">{{event.details}}</p>
                        </div>
                      </div>
                    </div>

                  <!--MODAL FOOTER-->
                    <div class="modal-footer">
                      <button type="submit" id="updateBtn" name="updateBtn" class="btn" style="background-color: #000000; color: white">Join</button>

                      <!-- <button type="button" class="btn" data-dismiss="modal" style="background-color: #6FB3B8; color: white">CANCEL</button> -->
                    </div>

                  </div>

                </div>
              </div>
            

          </div>
        </div>
      </div>
      {% endif %}

      {% endfor %}
    </div>


    <br>
    <div class="card">
      <h5 class="card-header">Events missed</h5>
    </div>
    <br>

    <!-- LOOP EVENT CARDS STARTS HERE -->

    <div class="row row-cols-1 row-cols-md-2 g-4">

      {% for event in events %}

      {% now "Y-m-d" as todays_date %}

      {% if  event.date < todays_date %}

      <div class="col">
        <div class="card">
          <!-- <img src="..." class="card-img-top" alt="..."> -->
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
            <a href="#" class="btn btn-outline-primary">Go somewhere</a>
          </div>
        </div>
      </div>
      {% endif %}

      {% endfor %}
    </div>

    <!-- LOOP ENDS HERE-->

    <br>
    <div class="card">
      <h5 class="card-header">Cancelled Events</h5>
    </div>
    <br>

    <div class="row row-cols-1 row-cols-md-2 g-4">

      {% for event in events %} 
    
      {% if event.is_cancelled == 1 %}

      <div class="col">
        <div class="card">
          <div class="card-body">

            <!-- EVENT TITLE -->
            <h5 class="card-title" name="event-name">{{event.title}}</h5>
            
            <!-- EVENT DESCRIPTION-->
            <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>

            <!-- VIEW EVENT BUTTON -->
            <button type="button" class="btn btn-outline-primary" name="event-view-btn" data-toggle="modal" data-target="#newModal-{{event.event_id}}">View Details</button>

            <!-- VIEW EVENT MODAL -->   
            <div class="modal fade" id="newModal-{{event.event_id}}" tabindex="-1" role="dialog" aria-labelledby="newModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">

                  <!--MDDAL HEADER-->
                  <div class="modal-content">
                    <div class="modal-header" style="background-color: #000000">
                      <h4 style="font-family: Helvetica; color: white; padding-bottom: 0px">
                        <b>Event Details</b></h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                  
                  <!-- MODAL BODY-->
                    <div class="modal-body">
                      <div class="jumbotron jumbotron-fluid">
                        <div class="container">
                          <h1 class="display-4">{{event.title}}</h1>
                          <p class="lead">{{event.details}}</p>
                        </div>
                      </div>
                    </div>

                  <!--MODAL FOOTER-->
                    <div class="modal-footer">
                      <button type="submit" id="updateBtn" name="updateBtn" class="btn" style="background-color: #000000; color: white">Join</button>

                      <!-- <button type="button" class="btn" data-dismiss="modal" style="background-color: #6FB3B8; color: white">CANCEL</button> -->
                    </div>

                  </div>

                </div>
              </div>
            

          </div>
        </div>
      </div>

      {% endif %}
      
      {% endfor %}

    </div>
</div>

  {% endblock content %}
